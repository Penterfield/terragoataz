steps:
- script: |
    mkdir TerrascanReport
    docker pull accurics/terrascan:latest
    docker run --rm -t -v $(System.DefaultWorkingDirectory):/src accurics/terrascan ./src -o junitxml > $(System.DefaultWorkingDirectory)/TerrascanReport/terrascan-report.xml
  displayName: TFSec Static Code Analysis
  
- task: PublishTestResults@2
  displayName: Publish Terrascan Test Results
  condition: succeededOrFailed()
  inputs:
    testResultsFormat: 'JUnit'
    testResultsFiles: '**/terrascan-report.xml'
    searchFolder: '$(System.DefaultWorkingDirectory)/TerrascanReport'
    mergeTestResults: false
    failTaskOnFailedTests: false
    publishRunAttachments: true
  
